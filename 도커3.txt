kubectl annotate deploy nginx-deployment kubernetes.io/change-cause='v1 is nginx:1.7.9'


kubectl set image deploy nginx-deployment nginx=nginx:1.9.1


kubectl annotate deploy nginx-deployment kubernetes.io/change-cause='v2 is revisioned nginx:1.9.1'



a19852a6266ef4c6bb11ee4c97a9bc87-1237575490.eu-central-1.elb.amazonaws.com






실제 수행 요약

docker build -t 052937454741.dkr.ecr.eu-central-1.amazonaws.com/admin23-cm-sandbox:v1 .

aws ecr create-repository --repository-name admin23-cm-sandbox --region eu-central-1

docker push 052937454741.dkr.ecr.eu-central-1.amazonaws.com/admin23-cm-sandbox:v1

kubectl create -f cm-deployment.yaml

kubectl get deploy

kubectl create -f cm-service.yaml

kubectl get svc



docker build -t 052937454741.dkr.ecr.eu-central-1.amazonaws.com/admin23-nginx-blue:latest  .

aws ecr create-repository --repository-name admin23-nginx-blue --region eu-central-1

aws ecr get-login-password --region eu-central-1 | docker login --username AWS --password-stdin 052937454741.dkr.ecr.eu-central-1.amazonaws.com

docker push 052937454741.dkr.ecr.eu-central-1.amazonaws.com/admin23-nginx-blue:latest

kubectl create -f nginx-blue-deployment.yaml




docker build -t 052937454741.dkr.ecr.eu-central-1.amazonaws.com/admin23-nginx-green:latest  .

aws ecr create-repository --repository-name admin23-nginx-green --region eu-central-1

aws ecr get-login-password --region eu-central-1 | docker login --username AWS --password-stdin 052937454741.dkr.ecr.eu-central-1.amazonaws.com

docker push 052937454741.dkr.ecr.eu-central-1.amazonaws.com/admin23-nginx-green:latest


kubectl create -f nginx-green-deployment.yaml



